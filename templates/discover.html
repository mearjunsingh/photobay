{% extends 'base.html' %}

{% block title %}Photobay - Beautiful Photos by Motivated Photographers{% endblock %}

{% block content %} {% load static %}

<div class="w3-content" style="margin-top:65px; max-width:1500px">

    <div class="w3-container">
        <div class="w3-bar w3-light-grey w3-round w3-padding">
            <div class="w3-container w3-section">
                <form action="." method="get">
                    <input type="search" name="search" class="w3-input w3-left w3-border" placeholder="Search photos, categories, tags, cameras, locations or users..." style="width:70%; outline:none;" required {% if request.GET.search %}value="{{ request.GET.search }}"{% endif %}>
                    <button class="w3-button w3-green w3-right w3-hover-red" type="submit" style="width:30%; height:41px; outline:none;">Search <i class="fa fa-search"></i></button>
                </form>

                {% if request.GET.search %}
                <span class="w3-container">
                    <strong>Search resuts:</strong> {{ request.GET.search }} <a href="{% url 'browse' %}" class="w3-text-red" style="text-decoration: none; margin-left: 20px;"><i class="fa fa-remove"></i> clear</a>
                </span>
                {% endif %}

                {% if request.GET.category %}
                <span class="w3-container">
                    <strong>Category resuts:</strong> {{ request.GET.category }} <a href="{% url 'browse' %}" class="w3-text-red" style="text-decoration: none; margin-left: 20px;"><i class="fa fa-remove"></i> clear</a>
                </span>
                {% endif %}
            </div>
        </div>
    </div>

<div class="w3-container flex-images">
    
    {% for item in data %}
        <div class="item" data-w="{{ item.image.width }}" data-h="{{ item.image.height }}">
            <img src="{{ item.image.url }}">
        </div>
    {% endfor %}

    {% for item in data %}
        <div class="item" data-w="{{ item.image.width }}" data-h="{{ item.image.height }}">
            <img src="{{ item.image.url }}">
        </div>
    {% endfor %}

    {% for item in data %}
        <div class="item" data-w="{{ item.image.width }}" data-h="{{ item.image.height }}">
            <img src="{{ item.image.url }}">
        </div>
    {% endfor %}

    {% for item in data %}
        <div class="item" data-w="{{ item.image.width }}" data-h="{{ item.image.height }}">
            <img src="{{ item.image.url }}">
        </div>
    {% endfor %}

    {% for item in data %}
        <div class="item" data-w="{{ item.image.width }}" data-h="{{ item.image.height }}">
            <img src="{{ item.image.url }}">
        </div>
    {% endfor %}

    {% for item in data %}
        <div class="item" data-w="{{ item.image.width }}" data-h="{{ item.image.height }}">
            <img data-src="{{ item.image.url }}" src="{% static 'images/blank.gif' %}">
        </div>
    {% endfor %}
   
</div>

  {% if data.paginator.num_pages > 1 %}
    <div class="w3-container w3-section w3-center">
      <div class="w3-bar w3-border w3-round">

        {% if data.number != 1 %}
          <a href="{{ base_url }}page=1" class="w3-bar-item w3-green w3-hover-red w3-button">First</a>
        {% else %}
          <button class="w3-bar-item w3-green w3-hover-green w3-button" disabled>First</button>
        {% endif %}

        {% if data.has_previous %}
          <a href="{{ base_url }}page={{ data.previous_page_number }}" class="w3-bar-item w3-green w3-hover-red w3-button">&laquo; Previous</a>
        {% else %}
          <button class="w3-bar-item w3-green w3-hover-green w3-button" disabled>&laquo;</button>
        {% endif %}

        {% for i in data.paginator.page_range %}
          {% if data.number == i %}
            <button class="w3-bar-item w3-red w3-hover-red w3-button">{{ i }}</button>
          {% elif data.number > i|add:"-3" and data.number < i|add:"+3"%}
            <a href="{{ base_url }}page={{ i }}" class="w3-bar-item w3-hide-small w3-green w3-hover-red w3-button">{{ i }}</a>
          {% endif %}
        {% endfor %}

        {% if data.has_next %}
          <a href="{{ base_url }}page={{ data.next_page_number }}" class="w3-bar-item w3-green w3-hover-red w3-button">Next &raquo;</a>
        {% else %}
          <button class="w3-bar-item w3-green w3-hover-green w3-button" disabled>&raquo;</button>
        {% endif %}

        {% if data.paginator.num_pages != data.number %}
          <a href="{{ base_url }}page={{ data.paginator.num_pages }}" class="w3-bar-item w3-green w3-hover-red w3-button">Last</a>
        {% else %}
          <button class="w3-bar-item w3-green w3-hover-green w3-button" disabled>Last</button>
        {% endif %}

      </div>
    </div>
  {% endif %}

</div>

<script>
    new flexImages({selector: '.flex-images', rowHeight: 180, truncate: 1, maxRows: 2});
</script>

{% endblock %}